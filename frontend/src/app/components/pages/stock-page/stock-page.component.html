
<app-not-found
    [visible]="!stock"
    notFoundMessage="Stock not found"
    resetLinkText="Homepage">
</app-not-found>
<div *ngIf="stock" class="container">
    <div class="details">
        <div class="header">
            <h1>{{stock.symbol}}</h1>
            <h1>{{stock.exchangeShortName}}</h1>
            <p>{{stock.type}}</p>
            <p>{{stock.exchange}}</p>
        </div>
        <div class="price-container" *ngIf="marketData">
            <div class="prices">
              <div class="price-box">
                <span class="label">Bid Price:</span>
                <span class="value">{{ marketData.bidPrice}}</span>
              </div>
              <div class="price-box">
                <span class="label">Ask Price:</span>
                <span class="value">{{ marketData.askPrice}}</span>
              </div>
              <div class="price-box">
                <span class="label">Last Sale Price:</span>
                <span class="value">{{ marketData.lastSalePrice}}</span>
              </div>
            </div>
          </div>
          <button type="button" class="btn btn-primary" (click)="openBuyModal()">Buy</button>
          <ng-template #buyModal let-modal>
            <div class="modal-header">
              <h5 class="modal-title">Cumpărare {{ companyProfile?.companyName || 'Stock' }}</h5>
              <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
            </div>
            <div class="modal-body">
              <img src="{{companyProfile?.image}}" alt="Company Logo" class="company-logo">
              <form #buyForm="ngForm">
                <div class="mb-3">
                  <label for="amount" class="form-label">Suma:</label>
                  <input type="number" class="form-control" id="amount" [(ngModel)]="purchaseAmount" name="amount" placeholder="Introduceți suma" required>
                </div>
                <div *ngIf="companyProfile?.price">
                  Prețul pe acțiune este: {{ companyProfile.price | currency:'USD':'symbol-narrow' }}
                  <br>
                  Puteți cumpăra până la {{ getMaximumShares(purchaseAmount) | number:'1.2-2' }} acțiuni.
                </div>
              </form>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" (click)="modal.close('Close click')">Închide</button>
              <button type="button" class="btn btn-primary" (click)="buyStock()">Verificare ordin</button>
            </div>
          </ng-template>
    </div>
    <div *ngIf="chartOptions">
        <highcharts-chart 
          [Highcharts]="Highcharts"
          [options]="chartOptions"
          [constructorType]=""
          style="width: 100%; height: 400px; display: block;">
        </highcharts-chart>
      </div>
      <div class="key-ratios" *ngIf="companyProfile">
        <p><span class="detail-label">Market Cap:</span> {{companyProfile.mktCap}}</p>
        <p><span class="detail-label">Revenue:</span> {{companyProfile.volAvg}}</p>
        <p><span class="detail-label">Last Divident:</span> {{companyProfile.lastDiv}}</p>
        <p><span class="detail-label">Beta:</span> {{companyProfile.beta}}</p>
      </div>
      <!-- <div class="stock-performance" *ngIf="priceChange">
        <h2>{{ priceChange.symbol }} Performance</h2>
        <div class="performance-table">
            <div class="performance-row">
                <span class="time-frame">1 Day</span>
                <span class="value">{{ priceChange['1D'] }}</span>
            </div>
            <div class="performance-row">
                <span class="time-frame">5 Days</span>
                <span class="value">{{ priceChange['5D'] }}</span>
            </div>
            <div class="performance-row">
                <span class="time-frame">1 Month</span>
                <span class="value">{{ priceChange['1M'] }}</span>
            </div>
            <div class="performance-row">
                <span class="time-frame">3 Months</span>
                <span class="value">{{ priceChange['3M'] }}</span>
            </div>
            <div class="performance-row">
                <span class="time-frame">6 Months</span>
                <span class="value">{{ priceChange['6M'] }}</span>
            </div>
            <div class="performance-row">
                <span class="time-frame">Year-to-Date</span>
                <span class="value">{{ priceChange.ytd }}</span>
            </div>
            <div class="performance-row">
                <span class="time-frame">1 Year</span>
                <span class="value">{{ priceChange['1Y'] }}</span>
            </div>
            <div class="performance-row">
                <span class="time-frame">3 Years</span>
                <span class="value">{{ priceChange['3Y'] }}</span>
            </div>
            <div class="performance-row">
                <span class="time-frame">5 Years</span>
                <span class="value">{{ priceChange['5Y'] }}</span>
            </div>
            <div class="performance-row">
                <span class="time-frame">10 Years</span>
                <span class="value">{{ priceChange['10Y'] }}</span>
            </div>
            <div class="performance-row">
                <span class="time-frame">Max</span>
                <span class="value">{{ priceChange.max }}</span>
            </div>
        </div>
    </div> -->
      <div class="company-profile-container" *ngIf="companyProfile">
        <div class="company-header">
            <img src="{{companyProfile.image}}" alt="Company Logo" class="company-logo">
            <h2 class="company-title">{{companyProfile.companyName}}</h2>
        </div>
        <div class="company-details">
            <p><span class="detail-label">CEO:</span> {{companyProfile.ceo}}</p>
            <p><span class="detail-label">Sector:</span> {{companyProfile.sector}}</p>
            <p><span class="detail-label">Industry:</span> {{companyProfile.industry}}</p>
            <p><span class="detail-label">Address:</span> {{companyProfile.address}}, {{companyProfile.city}}, {{companyProfile.state}} {{companyProfile.zip}}</p>
            <p><span class="detail-label">Website:</span> <a href="{{companyProfile.website}}" target="_blank">{{companyProfile.website}}</a></p>
            <p class="company-description"><span class="detail-label">Description:</span> {{companyProfile.description}}</p>
        </div>
    </div>
</div>




